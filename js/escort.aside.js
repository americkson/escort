!function(t,e,i){"use strict";function s(i){this.$wrapper=t(i),this.$trigger=this.$wrapper.find(".escort-aside-trigger"),this.id=this.$trigger.data("escort-aside"),this.display=this.$trigger.data("escort-aside-display"),this.$content=t("#escort-ajax-"+this.id),this.usesAjax=void 0!==this.$trigger.data("escort-ajax"),this.$document=t(e),this.$body=t("body"),this.setup()}t.extend(s,{instances:[]}),t.extend(s.prototype,{active:!1,setup:function(){var t=this;t.ajax(),t.$trigger.on("click.aside",function(e){e.preventDefault(),t.$trigger.off("click.aside.ajax"),t.active?t.hide():t.show()})},ajax:function(){var e=this;e.usesAjax&&void 0!==i.ajax&&e.$trigger.once("aside-ajax").each(function(){var e={};e.progress={type:"fullscreen"},e.url=t(this).attr("href"),e.event="click.aside.ajax",e.dialogType=t(this).data("dialog-type"),e.dialog=t(this).data("dialog-options"),e.base=t(this).attr("id"),e.element=this,i.ajax(e)})},show:function(e){var i=this;i.active||(i.active=!0,i.$wrapper.addClass("escort-active"),i.$content.addClass("escort-active"),setTimeout(function(){i.$document.on("click.escort-aside",function(e){t(e.target).closest(".escort-aside-content").length||i.hide()}),i.$document.on("escort-region:show escort-region:hide",function(t,e){i.hide()})},10))},hide:function(t){var e=this;e.active&&(e.active=!1,e.$wrapper.removeClass("escort-active"),e.$content.removeClass("escort-active"),e.$document.off("click.escort-aside"),e.$document.off("escort-region:show escort-region:hide"))}}),i.behaviors.escortAside={attach:function(e){var i=t(e).find(".escort-aside").once("escort-aside");if(i.length)for(var a=0;a<i.length;a++)s.instances.push(new s(i[a]))}},i.EscortAsides=s}(jQuery,document,Drupal);