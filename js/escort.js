!function(e,t,o){"use strict";function i(t){this.$region=e(t),this.region=this.$region.data("region"),this.$document=e(document),this.$body=e("body"),this.setup()}e.extend(i,{instances:[],hideFull:function(){for(var e=0,t=this.instances.length;e<t;e++)this.instances[e].hideFull()}}),e.extend(i.prototype,{active:!1,setup:function(){var e=this;if(e.$region.find(".escort-item").length){var o,i;e.$region.filter(".escort-vertical").on("mouseenter.escort",function(t){t.preventDefault(),i=e.$region.hasClass("escort-instant")?0:300,o=setTimeout(function(){e.showFull()},i)}).on("mouseleave.escort",function(e){e.preventDefault(),clearTimeout(o)})}else e.$region.remove(),e.$body.removeClass("has-escort-"+this.region),t.displace(!0)},showFull:function(){var t=this;t.active||(t.active=!0,t.$body.addClass("show-escort-full-"+t.region),t.$document.on("click.escort-"+t.region,function(o){t.active&&!e(o.target).closest(t.$region).length&&t.hideFull()}),t.$region.trigger("escort-region-full:show",[t.$region]),t.$document.trigger("escort-region:show",[t.$region]))},hideFull:function(){var e=this;e.active&&(e.active=!1,e.$body.removeClass("show-escort-full-"+e.region),e.$document.off("click.escort-"+e.region),e.$region.trigger("escort-region-full:hide",[e.$region]),e.$document.trigger("escort-region:hide",[e.$region]))}}),t.behaviors.escort={attach:function(t){var o=e(t).find(".escort-region").once("escort-region").addClass("escort-region-processed");if(o.length){for(var n=0;n<o.length;n++)i.instances.push(new i(o[n]));setTimeout(function(){e("body").addClass("escort-ready")},10)}}},t.Escort=i}(jQuery,Drupal,Drupal.displace);